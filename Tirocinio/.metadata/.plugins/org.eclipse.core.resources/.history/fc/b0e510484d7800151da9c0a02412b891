package it.sp4te.css.model;

import java.util.ArrayList;
import java.util.List;

/** <p>Titolo: Signal</p>
 * <p>Descrizione: Classe per la generazione del segnale</p>
 * @author Pietro Coronas **/

public class Signal extends AbstractSignal{

	int lenght;

	ArrayList<Double> samplesRe;
	ArrayList<Double> samplesIm;

	/**
	 * Costruttore del segnale modulato QPSK e con potenza unitaria. L'oggetto segnale contiene 2 array,
	 * rispettivamente relativi a parte reale e parte immaginaria.
	 * 
	 * @param signalLenght Lunghezza del segnale
	 **/

	public Signal(int signalLenght) {
		this.lenght = signalLenght;
		this.samplesRe = new ArrayList<Double>();
		this.samplesIm = new ArrayList<Double>();
		for (int i = 0; i < this.lenght; i++) {
			double v = Math.random();
			if (v < 0.5) {

				this.samplesRe.add(i, v / Math.sqrt(this.lenght));
				this.samplesIm.add(i, v / Math.sqrt(this.lenght));
			} else {
				this.samplesRe.add(i, -v / Math.sqrt(this.lenght));
				this.samplesIm.add(i, -v / Math.sqrt(this.lenght));

			}
		}
	}


	public int getSignalLenght() {
		return lenght;
	}

	public void setSignalLenght(int signalLenght) {
		this.lenght = signalLenght;
	}

	public ArrayList<Double> getSamplesRe() {
		return samplesRe;
	}

	public void setSamplesRe(ArrayList<Double> samplesRe) {
		this.samplesRe = samplesRe;
	}

	public ArrayList<Double> getSamplesIm() {
		return samplesIm;
	}

	public void setSamplesIm(ArrayList<Double> samplesIm) {
		this.samplesIm = samplesIm;
	}
	
	public Signal splitSignal(Signal s,int start,int end){
		int length=end-start;
		Signal signal = new Signal(length);
		List<Double> samplesRea = s.getSamplesRe().subList(start, end);
		List<Double> samplesImm = s.getSamplesIm().subList(start, end);
		signal.setSamplesRe(samplesRea);
		signal.setSamplesIm(samplesImm);
	}

}
